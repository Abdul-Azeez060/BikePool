<% layout('./layout/boilerplate') -%>
<style>
  #role {
    margin-bottom: 0.5rem;
  }
  .outer-container {
    max-height: 70vh;
    max-height: max-content;
    margin-bottom: 1rem;
  }
  .container {
    max-width: 50vw;
    min-width: 16rem;
    background-color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 2rem auto;
  }
  .login-form {
    padding: 0.5rem;
  }
  @media (max-width: 1090px) {
    .container {
      flex-direction: column;
    }
    .image-container img {
      width: 100%;
    }
  }
  @media (max-width: 600px) {
    form label {
      font-size: 80%;
    }
  }
</style>

<div class="outer-container">
  <div class="container p-3 mt-3">
    <form
      action="/user/login/successfull"
      class="needs-validation order-2 login-form"
      method="post"
      novalidate>
      <h3>Login</h3>
      <div class="mb-3">
        <div class="form-check">
          <input
            class="form-check-input"
            type="radio"
            name="role"
            id="driver"
            value="driver" />
          <label class="form-check-label" for="driver"> Driver </label>
        </div>

        <div class="form-check">
          <input
            class="form-check-input"
            type="radio"
            name="role"
            id="user"
            value="user"
            checked />
          <label class="form-check-label" for="user"> User </label>
        </div>
      </div>
      <div class="col-md mb-3">
        <label for="phone" class="form-label"
          >Please validate your Phone Number</label
        >
        <input
          style="display: none"
          type="number"
          id="phone"
          name="phone"
          value="7989332944"
          class="form-control"
          required />
        <div class="pe_signin_button" data-client-id="11494476566363047393">
          <script
            src="https://www.phone.email/sign_in_button_v1.js"
            async></script>
        </div>
        <div class="invalid-feedback">Please enter your mobile number</div>
      </div>
      <button type="submit" class="btn btn-outline-primary">Submit</button>
    </form>
    <div class="image-container order-1">
      <img
        src="https://static.vecteezy.com/system/resources/thumbnails/003/092/712/small/people-on-motorcycles-flat-doodle-illustration-vector.jpg"
        alt=""
        srcset="" />
    </div>
  </div>
</div>
<script>
  window.phoneEmailListener = function (userObj) {
    var user_phone_number = userObj.user_phone_number;
    document.getElementById("phone").value = user_phone_number;
  };
  // Example starter JavaScript for disabling form submissions if there are invalid fields
  (() => {
    "use strict";

    // Fetch all the forms we want to apply custom Bootstrap validation styles to
    const forms = document.querySelectorAll(".needs-validation");

    // Loop over them and prevent submission
    Array.from(forms).forEach((form) => {
      form.addEventListener(
        "submit",
        (event) => {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }

          form.classList.add("was-validated");
        },
        false
      );
    });
  })();
</script>
